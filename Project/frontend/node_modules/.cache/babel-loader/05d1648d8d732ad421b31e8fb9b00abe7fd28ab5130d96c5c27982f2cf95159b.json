{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { useAuthContext } from './useAuthContext';\nimport { useLogout } from './useLogout';\nimport { REACT_APP_API_URL } from '../utils/apiConfig';\nexport const useProfile = () => {\n  _s();\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [isLoading, setIsLoading] = useState(null);\n  const {\n    user\n  } = useAuthContext();\n  const {\n    logout\n  } = useLogout();\n  const deleteUser = async () => {\n    setIsLoading(true);\n    setError(null);\n    const response = await fetch('http://localhost:3001/api/user/me', {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${user.token}`\n      }\n    });\n    const json = await response.json();\n    if (!response.ok) {\n      setIsLoading(false);\n      setError(json.message);\n    }\n    if (response.ok) {\n      setIsLoading(false);\n      logout();\n    }\n  };\n  const editProfile = async (title, first_name, last_name, email, password, phone) => {\n    setIsLoading(true);\n    setError(null);\n    const response = await fetch('http://localhost:3001/api/user/me', {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${user.token}`\n      },\n      body: JSON.stringify({\n        title,\n        first_name,\n        last_name,\n        email,\n        ...(password && {\n          password\n        }),\n        phone\n      })\n    });\n    const json = await response.json();\n    if (!response.ok) {\n      setIsLoading(false);\n      setError(json.message);\n    }\n    if (response.ok) {\n      setIsLoading(false);\n      setSuccess(json.message);\n    }\n  };\n  return {\n    editProfile,\n    isLoading,\n    error,\n    success,\n    deleteUser\n  };\n};\n_s(useProfile, \"PHsm040cU6AhR3fpxjuRPvIsp38=\", false, function () {\n  return [useAuthContext, useLogout];\n});","map":{"version":3,"names":["useState","useAuthContext","useLogout","REACT_APP_API_URL","useProfile","_s","error","setError","success","setSuccess","isLoading","setIsLoading","user","logout","deleteUser","response","fetch","method","headers","token","json","ok","message","editProfile","title","first_name","last_name","email","password","phone","body","JSON","stringify"],"sources":["/Users/yadullah/Documents/Metropolia/GroupWork/web-project/frontend/src/hooks/useProfile.js"],"sourcesContent":["import { useState } from 'react'\nimport { useAuthContext } from './useAuthContext'\nimport { useLogout } from './useLogout';\nimport { REACT_APP_API_URL } from '../utils/apiConfig';\n\n\nexport const useProfile = () => {\n    const [error, setError] = useState(null)\n    const [success, setSuccess] = useState(null)\n    const [isLoading, setIsLoading] = useState(null)\n    const { user } = useAuthContext()\n    const { logout } = useLogout()\n\n    const deleteUser = async () => {\n        setIsLoading(true)\n        setError(null)\n\n        const response = await fetch('http://localhost:3001/api/user/me', {\n            method: 'DELETE',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${user.token}`\n            }\n        })\n\n        const json = await response.json()\n\n        if (!response.ok) {\n            setIsLoading(false)\n            setError(json.message)\n        }\n\n        if (response.ok) {\n            setIsLoading(false)\n            logout()\n        }\n\n    }\n\n    const editProfile = async (title, first_name, last_name, email, password, phone) => {\n        setIsLoading(true)\n        setError(null)\n\n        const response = await fetch('http://localhost:3001/api/user/me', {\n            method: 'PUT',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${user.token}`\n            },\n            body: JSON.stringify({ title, first_name, last_name, email, ...(password && { password }), phone })\n        })\n\n        const json = await response.json()\n\n        if (!response.ok) {\n            setIsLoading(false)\n            setError(json.message)\n        }\n\n        if (response.ok) {\n            setIsLoading(false)\n            setSuccess(json.message)\n        }\n    }\n    return { editProfile, isLoading, error, success, deleteUser }\n}"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,cAAc,QAAQ,kBAAkB;AACjD,SAASC,SAAS,QAAQ,aAAa;AACvC,SAASC,iBAAiB,QAAQ,oBAAoB;AAGtD,OAAO,MAAMC,UAAU,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC5B,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGP,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACQ,OAAO,EAAEC,UAAU,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACU,SAAS,EAAEC,YAAY,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM;IAAEY;EAAK,CAAC,GAAGX,cAAc,CAAC,CAAC;EACjC,MAAM;IAAEY;EAAO,CAAC,GAAGX,SAAS,CAAC,CAAC;EAE9B,MAAMY,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC3BH,YAAY,CAAC,IAAI,CAAC;IAClBJ,QAAQ,CAAC,IAAI,CAAC;IAEd,MAAMQ,QAAQ,GAAG,MAAMC,KAAK,CAAC,mCAAmC,EAAE;MAC9DC,MAAM,EAAE,QAAQ;MAChBC,OAAO,EAAE;QACL,cAAc,EAAE,kBAAkB;QAClC,eAAe,EAAG,UAASN,IAAI,CAACO,KAAM;MAC1C;IACJ,CAAC,CAAC;IAEF,MAAMC,IAAI,GAAG,MAAML,QAAQ,CAACK,IAAI,CAAC,CAAC;IAElC,IAAI,CAACL,QAAQ,CAACM,EAAE,EAAE;MACdV,YAAY,CAAC,KAAK,CAAC;MACnBJ,QAAQ,CAACa,IAAI,CAACE,OAAO,CAAC;IAC1B;IAEA,IAAIP,QAAQ,CAACM,EAAE,EAAE;MACbV,YAAY,CAAC,KAAK,CAAC;MACnBE,MAAM,CAAC,CAAC;IACZ;EAEJ,CAAC;EAED,MAAMU,WAAW,GAAG,MAAAA,CAAOC,KAAK,EAAEC,UAAU,EAAEC,SAAS,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,KAAK,KAAK;IAChFlB,YAAY,CAAC,IAAI,CAAC;IAClBJ,QAAQ,CAAC,IAAI,CAAC;IAEd,MAAMQ,QAAQ,GAAG,MAAMC,KAAK,CAAC,mCAAmC,EAAE;MAC9DC,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;QACL,cAAc,EAAE,kBAAkB;QAClC,eAAe,EAAG,UAASN,IAAI,CAACO,KAAM;MAC1C,CAAC;MACDW,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAER,KAAK;QAAEC,UAAU;QAAEC,SAAS;QAAEC,KAAK;QAAE,IAAIC,QAAQ,IAAI;UAAEA;QAAS,CAAC,CAAC;QAAEC;MAAM,CAAC;IACtG,CAAC,CAAC;IAEF,MAAMT,IAAI,GAAG,MAAML,QAAQ,CAACK,IAAI,CAAC,CAAC;IAElC,IAAI,CAACL,QAAQ,CAACM,EAAE,EAAE;MACdV,YAAY,CAAC,KAAK,CAAC;MACnBJ,QAAQ,CAACa,IAAI,CAACE,OAAO,CAAC;IAC1B;IAEA,IAAIP,QAAQ,CAACM,EAAE,EAAE;MACbV,YAAY,CAAC,KAAK,CAAC;MACnBF,UAAU,CAACW,IAAI,CAACE,OAAO,CAAC;IAC5B;EACJ,CAAC;EACD,OAAO;IAAEC,WAAW;IAAEb,SAAS;IAAEJ,KAAK;IAAEE,OAAO;IAAEM;EAAW,CAAC;AACjE,CAAC;AAAAT,EAAA,CA3DYD,UAAU;EAAA,QAIFH,cAAc,EACZC,SAAS;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}